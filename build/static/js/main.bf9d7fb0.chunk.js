(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{135:function(e,t,a){e.exports=a(277)},140:function(e,t,a){},277:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),r=a(8),o=a.n(r),i=(a(140),a(23)),c=a(24),s=a(28),u=a(25),d=a(29),h=a(15),p=a(31),m=a.n(p),f=a(282),b=a(278),v=a(283),g=a(280),y=a(10),k=a(27),j=a(281),K=a(279),O=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={newName:"",buttonDisabled:!0},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"onChange",value:function(e){this.setState({newName:e.target.value}),e.target.value.length>0&&this.setState({buttonDisabled:!1})}},{key:"createKettle",value:function(){m.a.database().ref("/kettles/"+this.state.newName).set({content:"Welcome to your new Kettle!"})}},{key:"onSubmit",value:function(){var e=this;m.a.database().ref("kettles/"+this.state.newName).once("value",function(t){t.exists()?e.props.cancel():(e.createKettle(),e.props.updateKettle(e.state.newName),e.props.cancel())})}},{key:"render",value:function(){var e=this;return l.a.createElement(K.a,{title:"New Kettle",visible:this.props.visible,onOk:function(){return e.onSubmit()},onCancel:function(){return e.props.cancel()},okButtonProps:{disabled:this.state.buttonDisabled}},l.a.createElement("div",null,"Remember, anybody can access your Kettle if they have the name, so if you want to keep it secret, make the name unique."),l.a.createElement(f.a,{placeholder:"Kettle Name...",onChange:function(t){return e.onChange(t)}}))}}]),t}(n.Component),x=a(132),E={position:"relative",border:"1px solid lightgray",width:"100%",maxWidth:"900px",padding:"20px",textAlign:"center",cursor:"pointer"},w={border:"none",boxShadow:"lightgreen 0px 0px 8px 2px"},C=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).state={files:[]},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"onDrop",value:function(e){this.setState({files:this.state.files.length>0?this.state.files.concat(e.map(function(e){return{file:e}})):e.map(function(e){return{file:e}})}),this.props.handleUpload(e)}},{key:"render",value:function(){return l.a.createElement("section",null,l.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},l.a.createElement(x.a,{accept:"image/*",onDrop:this.onDrop.bind(this),style:E,activeStyle:w},"Ways to upload: ",l.a.createElement("br",null),"1. Drag and drop ",l.a.createElement("br",null),"2. Click here to open file explorer")))}}]),t}(n.Component),S=a(69),I=a(70);function M(){var e=Object(S.a)(["\nmargin-top: -13%;\n"]);return M=function(){return e},e}function U(){var e=Object(S.a)(["\nmargin: 30px 10px;\nobject-fit: contain;\ndisplay: flex;\nalign-items: center;\nflex-direction: column;\n\nimg {\n    border: 1px solid black;\n}\n"]);return U=function(){return e},e}function D(){var e=Object(S.a)(["\n//  max-width: 900px;\n margin: 30px auto;\n display: flex;\n flex-direction: row;\n flex-wrap: wrap;\n"]);return D=function(){return e},e}var N=I.a.div(D()),A=I.a.div(U()),R=Object(I.a)(k.a)(M()),P=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.images;return l.a.createElement(N,null,t.length>0&&t.map(function(t,a){return l.a.createElement(z,{image:t,index:a,delete:e.props.deleteImage})}))}}]),t}(n.Component),z=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={hover:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(A,null,l.a.createElement("a",{target:"_blank",href:this.props.image.downloadURL},l.a.createElement("img",{onMouseOut:function(){return e.setState({hover:!1})},onMouseEnter:function(){return e.setState({hover:!0})},key:this.props.image.downloadURL,src:this.props.image.downloadURL,alt:this.props.image.name,height:"auto",width:"300"}))," ",this.state.hover&&l.a.createElement(R,{onMouseEnter:function(){return e.setState({hover:!0})},onClick:function(){return e.props.delete(e.props.index)}},"Delete"))}}]),t}(n.Component),B=f.a.Search,L=b.a.Item;p.initializeApp({apiKey:"AIzaSyD71FqS5lCiGdJuE8UrfS4Ic_TgHsgikV4",authDomain:"kettle-84ea2.firebaseapp.com",databaseURL:"https://kettle-84ea2.firebaseio.com",projectId:"kettle-84ea2",storageBucket:"kettle-84ea2.appspot.com",messagingSenderId:"850017678808"});var T=p.storage(),W=p.database(),J=T.ref(),q=J.child("kettles/"),F=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={value:"",currentKettle:"",content:"",showModal:!1,searchedKettle:"",error:!1,allKettles:[],images:[]},a.handleChange=a.handleChange.bind(Object(h.a)(Object(h.a)(a))),a.updateKettle=a.updateKettle.bind(Object(h.a)(Object(h.a)(a))),a.hideModal=a.hideModal.bind(Object(h.a)(Object(h.a)(a))),a.updateContent=a.updateContent.bind(Object(h.a)(Object(h.a)(a))),a.onKeyPress=a.onKeyPress.bind(Object(h.a)(Object(h.a)(a))),a.handleUpload=a.handleUpload.bind(Object(h.a)(Object(h.a)(a))),a.deleteImage=a.deleteImage.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){if(window.location.pathname.length>1){var e=window.location.pathname.slice(1);this.getKettle(e)}this.getAllKettles()}},{key:"showModal",value:function(){this.setState({showModal:!0})}},{key:"hideModal",value:function(){this.setState({showModal:!1})}},{key:"handleChange",value:function(e){this.setState({searchedKettle:e.target.value})}},{key:"onKeyPress",value:function(e){13===e.which&&(e.preventDefault(),this.getKettle(this.state.searchedKettle))}},{key:"getAllKettles",value:function(){var e=this;W.ref("kettles").on("value",function(t){e.setState({allKettles:Object.keys(t.val()||[])})})}},{key:"deleteImage",value:function(e){var t=this,a=this.state.images[e].name;J.child("kettles/".concat(this.state.currentKettle,"/").concat(a)).delete().then(function(){W.ref("kettles/".concat(t.state.currentKettle,"/images/").concat(a.replace(/\./g,""))).remove().then(function(){t.notify(!1)})})}},{key:"getKettle",value:function(e){var t=this,a=p.database().ref("kettles/".concat(e,"/"));W.ref("kettles/").on("value",function(n){n.hasChild(e)?a.on("value",function(a){t.setState({currentKettle:e,content:a.val().content||"",images:a.val().images?Object.values(a.val().images):[],error:!1})}):t.setState({currentKettle:"",error:!0})})}},{key:"updateContent",value:function(e){var t=this;W.ref("kettles/".concat(this.state.currentKettle,"/")).update({content:e.target.value});var a=p.database().ref("kettles/".concat(this.state.currentKettle,"/content"));W.ref("kettles/").on("value",function(e){a.on("value",function(e){t.setState({content:e.val()})})})}},{key:"updateKettle",value:function(e){this.getKettle(e),this.setState({currentKettle:e,showModal:!1})}},{key:"handleUpload",value:function(e){var t=this;e.map(function(e,a){var n=q.child("".concat(t.state.currentKettle,"/").concat(e.name)),l=new Blob([e],{type:e.type});return n.put(l).then(function(a){var n=e.name.replace(/\./g,"");W.ref("kettles/".concat(t.state.currentKettle,"/images/").concat(n)).set({name:a.metadata.name,downloadURL:a.downloadURL,size:a.metadata.size,timeCreated:a.metadata.timeCreated,contentType:a.metadata.contentType}),t.notify(!0)}),e})}},{key:"notify",value:function(e){v.a.open({message:"Image ".concat(e?"Uploaded":"Deleted"),description:e?"Yay! \ud83c\udf89":"If it was a mistake, then oops \ud83e\udd2d"})}},{key:"render",value:function(){var e=this,t=l.a.createElement(g.a,null,this.state.allKettles.map(function(t){return l.a.createElement(g.a.Item,{onClick:function(){return e.getKettle(t)},key:t},t)}));return l.a.createElement("div",{style:{padding:"0px 20px",userSelect:"none"}},l.a.createElement("div",{style:{textAlign:"center",fontSize:"24px",marginTop:"20px"}},l.a.createElement(y.a,{type:"coffee"})," kettle | ",l.a.createElement("small",null,this.state.currentKettle)),l.a.createElement(k.a,{style:{margin:"20px auto",display:"flex",border:"none"},className:"add-button",onClick:function(){return e.showModal()}},l.a.createElement(y.a,{type:"plus-circle",className:"create-icon"})),l.a.createElement("form",{onKeyPress:this.onKeyPress,style:{maxWidth:"900px",margin:"0px auto"}},l.a.createElement(j.a,{overlay:t,trigger:["click"]},l.a.createElement("div",{style:{width:"100%",margin:"10px 0",textAlign:"center"}},"Kettles ",l.a.createElement(y.a,{type:"down"}))),l.a.createElement(L,null,l.a.createElement(B,{type:"text",placeholder:"Search for Kettle...",size:"large",enterButton:!0,onSearch:function(){return e.getKettle(e.state.searchedKettle)},onChange:this.handleChange,style:{borderRadius:"20px !important"},autoFocus:!0,className:"searchBar"})),this.state.error&&l.a.createElement("span",{style:{color:"red"}},"Kettle does not exist."),l.a.createElement(L,null,l.a.createElement(f.a.TextArea,{value:this.state.content,onChange:function(t){return e.updateContent(t)}}))),l.a.createElement(C,{handleUpload:this.handleUpload}),l.a.createElement("div",null),l.a.createElement(P,{images:this.state.images,deleteImage:this.deleteImage}),l.a.createElement(O,{visible:this.state.showModal,cancel:this.hideModal,updateKettle:this.updateKettle}))}}]),t}(n.PureComponent);o.a.render(l.a.createElement(function(){return l.a.createElement("div",null,l.a.createElement("header",null),l.a.createElement(F,null))},null),document.getElementById("root"))}},[[135,2,1]]]);
//# sourceMappingURL=main.bf9d7fb0.chunk.js.map