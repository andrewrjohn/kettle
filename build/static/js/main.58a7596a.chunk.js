(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{139:function(e,t,a){e.exports=a(282)},144:function(e,t,a){},282:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(11),o=a.n(l),i=a(287),c=(a(144),a(25)),s=a(26),u=a(29),d=a(27),h=a(30),p=a(17),m=a(32),f=a.n(m),b=a(292),v=a(289),g=a(285),y=a(291),k=a(288),j=a(7),O=a(8),K=a(290),E=a(286),w=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={newName:"",buttonDisabled:!0},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"onChange",value:function(e){this.setState({newName:e.target.value}),e.target.value.length>0&&this.setState({buttonDisabled:!1})}},{key:"createKettle",value:function(){f.a.database().ref("/kettles/"+this.state.newName).set({content:"Welcome to your new Kettle!"})}},{key:"onSubmit",value:function(){var e=this;f.a.database().ref("kettles/"+this.state.newName).once("value",function(t){t.exists()?e.props.cancel():(e.createKettle(),e.props.updateKettle(e.state.newName),e.props.cancel())})}},{key:"render",value:function(){var e=this;return r.a.createElement(E.a,{title:"New Kettle",visible:this.props.visible,onOk:function(){return e.onSubmit()},onCancel:function(){return e.props.cancel()},okButtonProps:{disabled:this.state.buttonDisabled}},r.a.createElement("div",null,"Remember, anybody can access your Kettle if they have the name, so if you want to keep it secret, make the name unique."),r.a.createElement(v.a,{placeholder:"Kettle Name...",onChange:function(t){return e.onChange(t)}}))}}]),t}(n.Component),x=a(136),C={position:"relative",border:"1px solid lightgray",width:"100%",maxWidth:"900px",padding:"20px",textAlign:"center",cursor:"pointer"},S={border:"none",boxShadow:"lightgreen 0px 0px 8px 2px"},I=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={files:[]},e}return Object(h.a)(t,e),Object(s.a)(t,[{key:"onDrop",value:function(e){this.setState({files:this.state.files.length>0?this.state.files.concat(e.map(function(e){return{file:e}})):e.map(function(e){return{file:e}})}),this.props.handleUpload(e)}},{key:"render",value:function(){return r.a.createElement("section",null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(x.a,{accept:"image/*",onDrop:this.onDrop.bind(this),style:C,activeStyle:S},"Ways to upload: ",r.a.createElement("br",null),"1. Drag and drop ",r.a.createElement("br",null),"2. Click here to open file explorer")))}}]),t}(n.Component),M=a(73),U=a(74);function D(){var e=Object(M.a)(["\nmargin-top: -13%;\n"]);return D=function(){return e},e}function N(){var e=Object(M.a)(["\nmargin: 30px 10px;\nobject-fit: contain;\ndisplay: flex;\nalign-items: center;\nflex-direction: column;\n\nimg {\n    border: 1px solid black;\n}\n"]);return N=function(){return e},e}function A(){var e=Object(M.a)(["\n//  max-width: 900px;\n margin: 30px auto;\n display: flex;\n flex-direction: row;\n flex-wrap: wrap;\n"]);return A=function(){return e},e}var P=U.a.div(A()),R=U.a.div(N()),L=Object(U.a)(O.a)(D()),z=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.images;return r.a.createElement(P,null,t.length>0&&t.map(function(t,a){return r.a.createElement(B,{image:t,index:a,delete:e.props.deleteImage})}))}}]),t}(n.Component),B=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={hover:!1},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(R,null,r.a.createElement("a",{target:"_blank",href:this.props.image.downloadURL},r.a.createElement("img",{onMouseOut:function(){return e.setState({hover:!1})},onMouseEnter:function(){return e.setState({hover:!0})},key:this.props.image.downloadURL,src:this.props.image.downloadURL,alt:this.props.image.name,height:"auto",width:"300"}))," ",this.state.hover&&r.a.createElement(L,{onMouseEnter:function(){return e.setState({hover:!0})},onClick:function(){return e.props.delete(e.props.index)}},"Delete"))}}]),t}(n.Component),T=v.a.Search,W=g.a.Item;m.initializeApp({apiKey:"AIzaSyD71FqS5lCiGdJuE8UrfS4Ic_TgHsgikV4",authDomain:"kettle-84ea2.firebaseapp.com",databaseURL:"https://kettle-84ea2.firebaseio.com",projectId:"kettle-84ea2",storageBucket:"kettle-84ea2.appspot.com",messagingSenderId:"850017678808"});var J=m.storage(),q=m.database(),F=J.ref(),_=F.child("kettles/"),G=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={value:"",currentKettle:"",content:"",showModal:!1,searchedKettle:"",error:!1,allKettles:[],images:[]},a.handleChange=a.handleChange.bind(Object(p.a)(Object(p.a)(a))),a.updateKettle=a.updateKettle.bind(Object(p.a)(Object(p.a)(a))),a.hideModal=a.hideModal.bind(Object(p.a)(Object(p.a)(a))),a.updateContent=a.updateContent.bind(Object(p.a)(Object(p.a)(a))),a.onKeyPress=a.onKeyPress.bind(Object(p.a)(Object(p.a)(a))),a.handleUpload=a.handleUpload.bind(Object(p.a)(Object(p.a)(a))),a.deleteImage=a.deleteImage.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(window.location.pathname.length>1){var t=window.location.pathname.slice(1);this.getKettle(t)}this.getAllKettles(),window.addEventListener("beforeinstallprompts",function(t){e.setState({deferredPrompt:t})})}},{key:"showModal",value:function(){this.setState({showModal:!0})}},{key:"hideModal",value:function(){this.setState({showModal:!1})}},{key:"handleChange",value:function(e){this.setState({searchedKettle:e.target.value})}},{key:"onKeyPress",value:function(e){13===e.which&&(e.preventDefault(),this.getKettle(this.state.searchedKettle))}},{key:"getAllKettles",value:function(){var e=this;q.ref("kettles").on("value",function(t){e.setState({allKettles:Object.keys(t.val()||[])})})}},{key:"deleteImage",value:function(e){var t=this,a=this.state.images[e].name;F.child("kettles/".concat(this.state.currentKettle,"/").concat(a)).delete().then(function(){q.ref("kettles/".concat(t.state.currentKettle,"/images/").concat(a.replace(/\./g,""))).remove().then(function(){t.notify(!1)})})}},{key:"getKettle",value:function(e){var t=this,a=m.database().ref("kettles/".concat(e,"/"));q.ref("kettles/").on("value",function(n){n.hasChild(e)?(t.props.history.push("/".concat(e)),a.on("value",function(a){t.setState({currentKettle:e,content:a.val().content||"",images:a.val().images?Object.values(a.val().images):[],error:!1})})):t.setState({currentKettle:"",error:!0})})}},{key:"updateContent",value:function(e){var t=this;q.ref("kettles/".concat(this.state.currentKettle,"/")).update({content:e.target.value});var a=m.database().ref("kettles/".concat(this.state.currentKettle,"/content"));q.ref("kettles/").on("value",function(e){a.on("value",function(e){t.setState({content:e.val()})})})}},{key:"updateKettle",value:function(e){this.getKettle(e),this.setState({currentKettle:e,showModal:!1})}},{key:"handleUpload",value:function(e){var t=this;e.map(function(e,a){var n=_.child("".concat(t.state.currentKettle,"/").concat(e.name)),r=new Blob([e],{type:e.type});return n.put(r).then(function(a){var n=e.name.replace(/\./g,"");q.ref("kettles/".concat(t.state.currentKettle,"/images/").concat(n)).set({name:a.metadata.name,downloadURL:a.downloadURL,size:a.metadata.size,timeCreated:a.metadata.timeCreated,contentType:a.metadata.contentType}),t.notify(!0)}),e})}},{key:"notify",value:function(e){y.a.open({message:"Image ".concat(e?"Uploaded":"Deleted"),description:e?"Yay! \ud83c\udf89":"If it was a mistake, then oops \ud83e\udd2d"})}},{key:"render",value:function(){var e=this,t=r.a.createElement(k.a,null,this.state.allKettles.map(function(t){return r.a.createElement(k.a.Item,{onClick:function(){return e.getKettle(t)},key:t},t)}));return r.a.createElement("div",{style:{padding:"0px 20px",userSelect:"none"}},r.a.createElement("div",{style:{textAlign:"center",fontSize:"24px",marginTop:"20px"}},r.a.createElement(j.a,{type:"coffee"})," kettle | ",r.a.createElement("small",null,this.state.currentKettle)),r.a.createElement(O.a,{style:{margin:"20px auto",display:"flex",border:"none"},className:"add-button",onClick:function(){return e.showModal()}},r.a.createElement(j.a,{type:"plus-circle",className:"create-icon"})),r.a.createElement("form",{onKeyPress:this.onKeyPress,style:{maxWidth:"900px",margin:"0px auto"}},r.a.createElement(K.a,{overlay:t,trigger:["click"]},r.a.createElement("div",{style:{width:"100%",margin:"10px 0",textAlign:"center"}},"Kettles ",r.a.createElement(j.a,{type:"down"}))),r.a.createElement(W,null,r.a.createElement(T,{type:"text",placeholder:"Search for Kettle...",size:"large",enterButton:!0,onSearch:function(){return e.getKettle(e.state.searchedKettle)},onChange:this.handleChange,style:{borderRadius:"20px !important"},autoFocus:!0,className:"searchBar"})),this.state.error&&r.a.createElement("span",{style:{color:"red"}},"Kettle does not exist."),r.a.createElement(W,null,r.a.createElement(v.a.TextArea,{value:this.state.content,onChange:function(t){return e.updateContent(t)}}))),r.a.createElement(I,{handleUpload:this.handleUpload}),r.a.createElement("div",null),r.a.createElement(z,{images:this.state.images,deleteImage:this.deleteImage}),r.a.createElement(w,{visible:this.state.showModal,cancel:this.hideModal,updateKettle:this.updateKettle}))}}]),t}(n.PureComponent),H=Object(b.a)(G);o.a.render(r.a.createElement(function(){return r.a.createElement(i.a,null,r.a.createElement("div",null,r.a.createElement("header",null),r.a.createElement(H,null)))},null),document.getElementById("root"))}},[[139,2,1]]]);
//# sourceMappingURL=main.58a7596a.chunk.js.map